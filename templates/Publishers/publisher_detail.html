{% extends "base.html" %}
{% load static %}

{% block title %} {{ publisher.name }} {% endblock %}

{% block content %}
<div class="container py-5">

    <a href="{% url 'Publisher:publishers' %}" 
       class="text-secondary back-btn-custom text-decoration-none mb-4 d-inline-block">
        <i class="fa fa-arrow-left me-1"></i> Back to Publishers
    </a>

    <div class="publisher-info-card shadow-lg mb-5">

        <div class="publisher-detail-header">

            {% if publisher.logo %}
            <img src="{{ publisher.logo.url }}" 
                 class="publisher-detail-logo" 
                 alt="{{ publisher.name }}">
            {% else %}
            <div class="publisher-detail-logo d-flex justify-content-center align-items-center text-muted">
                No Logo
            </div>
            {% endif %}

            <div>
                <h1 class="fw-bold">{{ publisher.name }}</h1>
                <p class="text-secondary">{{ publisher.description }}</p>
            </div>

        </div>

    </div>

    <h3 class="section-title text-center">Games by {{ publisher.name }}</h3>
    
    <div class="row g-4 mt-2">
                
        {% for game in games %}
                
        <div class="col-sm-6 col-md-6 col-lg-4 col-xl-3">
            <div class="card game-card h-100 shadow-lg border-0 rounded-xl overflow-hidden transition-all duration-300 hover:shadow-2xl hover:scale-105">
                        
                <img src="{{ game.poster.url }}" class="card-img-top game-card-img" alt="Game Cover">
                        
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title fw-bold game-card-title">{{ game.title }}</h5>

                    <div class="star-rating d-flex mb-3">
                        {% for i in "12345"|make_list %}
                            <i class="fas fa-star me-1 {% if i|add:'0' <= game.rating %}active{% else %}inactive{% endif %}"></i>
                        {% endfor %}
                        <span class="ms-1 small text-muted fw-bold">({{ game.rating|default:'0' }}/5)</span>
                    </div>

                    <div class="mb-3 d-flex flex-wrap gap-2">
                        {% if game.categories.all %}
                            {% for category in game.categories.all %}
                                <span class="category-badge">{{ category.name }}</span>
                            {% endfor %}
                        {% else %}
                            <span class="text-muted small">No categories specified.</span>
                        {% endif %}
                    </div>

                    <p class="card-text flex-grow-1">{{ game.description|truncatechars:100 }}</p>

                    <a href="{% url 'Games:game_detail' game.id %}" class="btn btn-primary bg-dark-custom border-0 mt-3 p-2 fw-bold">
                        View Game <i class="fas fa-arrow-right ms-1"></i>
                    </a>
                </div>
            </div>
        </div>
                
        {% empty %}
                
        <div class="col-12 text-center">
            <div class="alert alert-info" role="alert">
                No games found in the catalog.
            </div>
        </div>
                
        {% endfor %}
    </div>
</div>
{% endblock %}
